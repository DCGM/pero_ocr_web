{% extends "base/base.html" %} {% block content %}
    <div onkeypress="editor_keypress(event)">
        <h3 class="text-left">{{ document.name }} - Layout Analysis Results</h3>
        <div class="results-preview-container my-3">
            <div class="results-preview-btn prev-btn disabled">
                <ion-icon name="arrow-dropleft"></ion-icon>
            </div>
            <div class="images-container">
                {% for image in images %}
                    <div class="image-item-container d-inline-flex flex-column" data-document="{{ document.id }}"
                         data-image="{{ image.id }}">
                        <div class="image-container">
                            <img
                                    src="/layout_analysis/get_result_preview/{{ image.id }}"
                                    alt="{{ image.filename }}"
                                    class="uploaded_image card-img-top"
                            />
                        </div>
                        <div class="text-center">
                            <p class="image-item-name"
                               data-toggle="tooltip"
                               data-placement="right"
                               title="{{ image.filename }}">
                                {{ image.filename }}</p>
                        </div>
                        <div class="d-none image-item-active"></div>
                    </div>
                {% endfor %}
            </div>
            <div class="results-preview-btn next-btn">
                <ion-icon name="arrow-dropright"></ion-icon>
            </div>
        </div>
        <div class="current-result-container" data-document="{{ document.id }}" data-image="{{ images[0].id }}">
            <div class="my-2">
                <button class="btn btn-secondary" onclick="get_image(annotator_data.uuid)">Reset (r)</button>
                <button class="btn btn-secondary" onclick="next_image();">Next (n)</button>
                <button class="btn btn-secondary" onclick="previous_image();">Back (b)</button>
                <button class="btn btn-secondary" onclick="create_new_object();">New object (c)</button>
                <button class="btn btn-secondary" onclick="toggle_delete_object();">Toggle delete (g)</button>
                <button class="btn btn-secondary" onclick="toggle_delete_all_objects();">Toggle delete all (a)</button>
                <button class="btn btn-secondary" onclick="save_image()">save (s)</button>
            </div>
            <div id="map-container">
                <div id="mapid"></div>
            </div>
            <p id="status"></p>
        </div>
    </div>
{% endblock %} {% block styles %}
    <link rel="stylesheet" href="/static/leaflet/leaflet.css">
    <link rel="stylesheet" href="/static/css/LayoutResults.css">
{% endblock %}

{% block scripts %}
    <script src="/static/leaflet/leaflet.js"></script>
    <script src="/static/leaflet/Leaflet.Editable.js"></script>
    <script src="/static/leaflet/Path.Drag.js"></script>
    <script>
        var document_id = '{{ document.id }}';
        var first_image = '{{ images[0].id }}';
        var imagesId = [];
        {% for image in images %}
            imagesId.push('{{ image.id }}');
        {% endfor %}
    </script>
    <script src="/static/js/LayoutResults.js"></script>
{% endblock %}